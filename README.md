# Задание демонстрационного экзамена базового уровня 2023 года

09.02.06 Сетевое и системное администрирование

# Модуль 1: Выполнение работ по проектированию сетевой инфраструктуры

## Рисунок 1. Логическая схема сети

![picture-1](https://github.com/Dauxdu/DEMO2023/assets/96863567/f883189b-35ab-46dd-9804-7175db459922)

## Таблица 1. Характеристики VMs

| Name VM |              ОС               |  RAM   | CPU |         IP         |      Additionally      |
| :-----: | :---------------------------: | :----: | :-: | :----------------: | :--------------------: |
|  RTR-L  |         Debian 11/CSR         |  2 GB  | 2/4 |    7.7.7.100/24    |                        |
|         |                               |        |     | 192.168.100.254/24 |                        |
|  RTR-R  |         Debian 11/CSR         |  2 GB  | 2/4 |    8.8.8.100/24    |                        |
|         |                               |        |     | 172.16.100.254 /24 |                        |
|   SRV   | Debian 11/Windows Server 2019 | 2/4 GB | 2/4 | 192.168.100.200/24 | Доп диски 2 шт по 2 GB |
|  WEB-L  |           Debian 11           |  2 GB  |  2  | 192.168.100.100/24 |                        |
|  WEB-R  |           Debian 11           |  2 GB  |  2  | 172.16.100.100/24  |                        |
|   ISP   |           Debian 11           |  2 GB  |  2  |     7.7.7.1/24     |                        |
|         |                               |        |     |     8.8.8.1/24     |                        |
|         |                               |        |     |     3.3.3.1/24     |                        |
|   CLI   |          Windows 10           |  4 GB  |  4  |    3.3.3.10/24     |                        |

## Данные для авторизации

`root` | `toor`

### 1. Выполнение проектирования кабельной структуры компьютерной сети

<details>
<summary>
    
#### 1.1. На основе представленных виртуальных машин или шаблонов виртуальных машин создайте отсутствующие виртуальные машины в соответствии со схемой.

- а. Установите характеристики виртуальных машин в соответствии с [Таблицей 1](https://github.com/Dauxdu/DEMO2023#%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-1-%D1%85%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B8-vms).
- б. Выполните коммутацию (если она не выполнена) в соответствии со схемой сети.

</summary>

> Убедитесь, что все виртуальные машины созданы в соответствии со схемой.

</details>

<details>
<summary>

#### 1.2. Имена хостов в созданных виртуальных машинах должны быть установлены в соответствии со схемой.

</summary>

### ISP

```
hostnamectl set-hostname ISP
```

### RTR-L

```
hostnamectl set-hostname RTR-L
```

### RTR-R

```
hostnamectl set-hostname RTR-R
```

### SRV

```
hostnamectl set-hostname SRV
```

### WEB-L

```
hostnamectl set-hostname WEB-L
```

### WEB-R

```
hostnamectl set-hostname WEB-R
```

### CLI

```
Start --> Settings --> System --> About --> Rename this PC
```

> Проверить изменения можно c помощью `hostnamectl`

</details>

<details>
<summary>

#### 1.3. Адресация должна быть выполнена в соответствии с [Таблицей 1](https://github.com/Dauxdu/DEMO2023#%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-1-%D1%85%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B8-vms);

</summary>

### ISP

```
nmtui
```

#### ISP-L

```
Profile name: ISP-L

IPv4 configuration <Manual>
Addresses 7.7.7.1/24
```

#### ISP-R

```
Profile name: ISP-R

IPv4 configuration <Manual>
Addresses 8.8.8.1/24
```

#### ISP-CLI

```
Profile name: ISP-R

IPv4 configuration <Manual>
Addresses 3.3.3.1/24
```

### RTR-L

```
nmtui
```

#### ISP-L

```
Profile name: ISP-L

IPv4 configuration <Manual>
Addresses 7.7.7.100/24
Gateway 7.7.7.1
```

#### Left

```
Profile name: Left

IPv4 configuration <Manual>
Addresses 192.168.100.254/24
```

### RTR-R

```
nmtui
```

#### ISP-R

```
Profile name: ISP-R

IPv4 configuration <Manual>
Addresses 8.8.8.100/24
Gateway 8.8.8.1
```

#### Right

```
Profile name: Right

IPv4 configuration <Manual>
Addresses 172.16.100.254/24
```

### SRV

```
nmtui
```

#### Left

```
Profile name: Left

IPv4 configuration <Manual>
Addresses 192.168.100.200/24
Gateway 192.168.100.254
```

### WEB-L

```
nmtui
```

#### Left

```
Profile name: Left

IPv4 configuration <Manual>
Addresses 192.168.100.100/24
Gateway 192.168.100.254
```

### WEB-R

```
nmtui
```

#### Right

```
Profile name: Right

IPv4 configuration <Manual>
Addresses 172.16.100.100/24
Gateway 172.16.100.254
```

### CLI

</details>

#### 1.4. Обеспечьте виртуальные машины дисками, если таковое необходимо в соответствии с [Таблицей 1](https://github.com/Dauxdu/DEMO2023#%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-1-%D1%85%D0%B0%D1%80%D0%B0%D0%BA%D1%82%D0%B5%D1%80%D0%B8%D1%81%D1%82%D0%B8%D0%BA%D0%B8-vms).

#### 2. Осуществление выбора технологии, инструментальных средств и средств вычислительной техники при организации процесса разработки и исследования объектов профессиональной деятельности

#### 2.1. Настройте статический маршрут по умолчанию на маршрутизаторах **_RTR-L_** и **_RTR-R_**.

#### 2.2. Настройте динамическую трансляцию портов (PAT):

- На маршрутизаторе **_RTR-L_** настройте динамическую трансляцию портов (PAT) для сети `192.168.100.0/24` в соответствующие адреса исходящего интерфейса;
- На маршрутизаторе **_RTR-R_** настройте динамическую трансляцию портов (PAT) для сети `172.16.100.0/24` в соответствующие адреса исходящего интерфейса.

#### 2.3. Между платформами RTR-L и RTR-R должен быть установлен туннель, позволяющий осуществлять связь между регионами с применением внутренних адресов со следующими параметрами:

- a. Используйте в качестве VTI интерфейс `Tunnel1`;
- b. Между платформами должен быть установлен туннель, позволяющий осуществлять связь между регионами с применением внутренних адресов.

#### 2.4. Настройте динамическую маршрутизацию между платформами **_RTR-L_** и **_RTR-R_**.

#### 2.5. Трафик, идущий по туннелю между регионами по внутренним адресам не должен транслироваться.

# Модуль 2: Организация сетевого администрирования

## Таблица 2. DNS-записи зон

|     Zone     | Record type |   Key    | Value           |
| :----------: | :---------- | :------: | :-------------- |
|   demo.wsr   | A           |   ISP    | 3.3.3.1         |
|              | A           |   www    | 7.7.7.100       |
|              | A           |   www    | 8.8.8.100       |
|              | CNAME       | internet | ISP             |
| int.demo.wsr | A           |  web-l   | 192.168.100.100 |
|              | A           |  web-r   | 172.16.100.100  |
|              | A           |   srv    | 192.168.100.200 |
|              | A           |  rtr-l   | 192.168.100.254 |
|              | A           |  rtr-r   | 172.16.100.254  |
|              | CNAME       | webapp-l | web-l           |
|              | CNAME       | webapp-r | web-r           |
|              | CNAME       |   ntp    | srv             |
|              | CNAME       |   dns    | srv             |

### 1. Администрирование локальных вычислительных сетей и принятие мер по устранению возможных сбоев

#### 1.1. Сети, подключённые к **_ISP_**, считаются внешними:

- Запрещено прямое попадание трафика из внутренних сетей во внешние и наоборот;

#### 1.2. Обеспечьте настройку служб SSH региона Left:

- а. Подключение со стороны внешних сетей по протоколу к платформе управления трафиком **_RTR-L_** на порт `2222` должны быть перенаправлены на **_WEB-L_**;
- b. Подключение со стороны внешних сетей по протоколу к платформе управления трафиком **_RTR-R_** на порт `2244` должны быть перенаправлены на **_WEB-R_**.

### 2. Адмминистрирование сетевых ресурсов в информационных системах

#### 2.1. Выполните настройку первого уровня DNS-системы стенда:

- а. Используйте **_ISP_**;
- b. Обслуживается зона `demo.wsr`;
  - Наполнение зоны должно быть реализовано в соответствии с [Таблицей 2](https://github.com/Dauxdu/DEMO2023#%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-2-dns-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8-%D0%B7%D0%BE%D0%BD).
- c. Сервер делегирует зону `int.demo.wsr` на **_SRV_**;
  - Поскольку SRV находится во внутренней сети западного региона, делегирование происходит на внешний адрес маршрутизатора данного региона;
  - Маршрутизатор региона должен транслировать соответствующие порты DNS-службы в порты сервера **_SRV_**.
- d. Внешний клиент **_CLI_** должен использовать DNS-службы, развёрнутую на **_ISP_**, по умолчанию.

#### 2.2. Выполните настройку второго уровня DNS-системы стенда:

- а. Используйте **_SRV_**;
- b. Обслуживается зона `int.demo.wsr`;
  - Наполнение зоны должно быть реализовано в соответствии с [Таблицей 2](https://github.com/Dauxdu/DEMO2023#%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-2-dns-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8-%D0%B7%D0%BE%D0%BD).
- c. Обслуживаются обратные зоны для внутренних адресов регионов;
  - Имена для разрешения обратных записей следует брать из [Таблицей 2](https://github.com/Dauxdu/DEMO2023#%D1%82%D0%B0%D0%B1%D0%BB%D0%B8%D1%86%D0%B0-2-dns-%D0%B7%D0%B0%D0%BF%D0%B8%D1%81%D0%B8-%D0%B7%D0%BE%D0%BD).
- d. Сервер принимает рекурсивные запросы, исходящие от адресов внутренних регионов;
  - Обслуживание клиентов (внешних и внутренних), обращающихся к зоне `int.demo.wsr` должно производиться без каких либо ограничений по адресу источника.
- e. Внутренние хосты регионов (равно как и платформы управления трафиком) должны использовать данную DNS-службу для разрешения всех запросов имен.

#### 2.3. Выполните настройку первого уровня системы синхронизации времени:

- а. Используйте **_ISP_**;
- b. Сервер считает собственный источник времени верным, `stratum=4`;
- c. Сервер допускает подключение только через внешний адрес соответствующей платформы управления трафиком;
  - Подразумевается обращение **_SRV_** для синхронизации времени.
- d. Клиент **_CLI_** должен использовать службу времени **_ISP_**

#### 2.4. Выполните настройку второго уровня системы синхронизации времени на **_SRV_**:

- а. Сервер синхронизирует время с **_ISP_**;
  - Синхронизация с другими источниками запрещена.
- b. Сервер должен допускать обращение внутренних хостов регионов, в том числе и платформ управления трафиком, для синхронизации времени;
- c. Все внутренние хосты (в том числе и платформы управления трафиком) должны синхронизировать своё время с **_SRV_**.

#### 2.5. Реализуйте файловый SMB-сервер на базе **_SRV_**

- а. Сервер должен предоставлять доступ для обмена файлами серверам **_WEB-L_** и **_WEB-R_**;
- b. Сервер, в зависимости от ОС, использует следующие каталоги для хранения файлов:
  - `/mnt/storage` для систем на базе Linux;
  - Диск `R:\` для систем на базе Windows.
- c. Хранение файлов осуществляется на диске (смонтированным по указанным выше адресам), реализованном по технологии RAID1.

#### 2.6. Сервера **_WEB-L_** и **_WEB-R_** должны использовать службу, настроенную на **_SRV_**, для обмена файлов между собой

- a. В случае применения решения на базе Linux используется центр сертификации типа OpenSSL и располагается по адресу `/var/ca`;
- b. Выдаваемые сертификаты должны иметь срок жизни не менее 500 дней;
- c. Параметры выдаваемых сертификатов:
  - Страна `RU`;
  - Организация `DEMO.WSR`;
  - Прочие поля (за исключением CN) должны быть пусты.

### 3. Взаимодействие со специалистами смежного профиля при разработке методов, средств и технологий применения объектов профессиональной деятельности

#### 3.1. Образ Docker (содержащий веб-приложение) расположен на [ISO-образе](https://disk.yandex.com/d/kT7zxzLzpmuggA) дополнительных материалов:

- a. Выполните установку приложения AppDocker0.

#### 3.2. Пакеты установки Docker расположены на дополнительном ISO-образе

#### 3.3. Инструкция по работе с приложением расположена на дополнительном ISO-образе

#### 3.4. Необходимо реализовать следующую инфраструктуру приложения:

- a. Клиентом приложения является **_CLI_** (браузер Edge);
- b. Хостинг приложения осуществляется на виртуальной машинах **_WEB-L_** и **_WEB-R_**;
- c. Доступ к приложению осуществляется по DNS-имени `www.demo.wsr`;
  - Имя должно разрешаться во внешние адреса виртуальной машины управления трафиком в обоих регионах;
  - При необходимости доступа к приложению допускается реализовать реверс-прокси или трансляцию портов.
- d. Доступ к приложению должен быть защищён с применением технологии TLS;
  - Необходимо обеспечить корректное доверие сертификату сайта, без применения исключений и подобных механизмов.
- e. Незащищённое соединение должно переводится на защищённый канал автоматически.

#### 3.5. Необходимо обеспечить отказоустойчивость приложения:

- a. Сайт должен продолжать обслуживание (с задержкой не более 25 секунд) в следующих сценариях.
  - Отказ одной из виртуальной машины **_WEB_**;
  - Отказ одной из виртуальной машины управления трафиком.

# Модуль 3: Эксплуатация объектов сетевой инфраструктуры

### 1. Установка, настройка, эксплуатация и обслуживание технических и программно-аппаратных средств компьютерных сетей

#### 1.1. Защита должна обеспечиваться с помощью IPsec между платформами **_RTR-L_** И **_RTR-R_**

- a. Используйте аутентификацию по общему ключу;
- b. Параметры IPsec произвольные.

### 2. Установка, настройка, эксплуатация и обслуживание сетевых конфигураций

#### 2.1. Платформа управления трафиком **_RTR-R_** выполняет контроль входящего трафика согласно следующим правилам:

- a. Разрешаются подключения к портам HTTP и HTTPS для всех клиентов;
  - Порты необходимые для работы настраиваемых служб.
- b. Разрешается работа выбранного протокола организации защищённой связи;
  - Разрешение портов должно быть выполнено по принципу необходимо и достаточно.
- c. Разрешается работа протоколов ICMP;
- d. Разрешается работа протокола SSH;
- e. Прочие подключения запрещены;
- f. Для обращений к платформам со стороны хостов, находящихся внутри регионов, ограничений быть не должно.

#### 2.2. Платформа управления трафиком **_RTR-L_** выполняет контроль входящего трафика согласно следующим правилам:

- a. Разрешается подключения к портам DNS, HTTP и HTTPS для всех клиентов;
  - Порты необходимы для работы настраиваемых служб.
- b. Разрешается работа выбранного протокола организации защищённой связи;
  - Разрешение портов должно быть выполнено по принципу необходимо и достаточно.
- c. Разрешается работа ICMP;
- d. Разрешается работа SSH;
- e. Прочие подключения запрещены;
- f. Для обращений к платформам со стороны хостов, находящихся внутри регионов, ограничений быть не должно.

---
